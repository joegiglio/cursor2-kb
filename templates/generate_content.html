{% extends "base.html" %}
{% block content %}
<div class="container mt-4">
    <h1 class="text-center mb-4">Generate Random Content</h1>
    
    <form method="POST" action="{{ url_for('generate_content') }}" id="generate-form">
        <div class="mb-3">
            <label for="num_topics" class="form-label">Number of Topics</label>
            <input type="number" class="form-control" id="num_topics" name="num_topics" min="1" max="10" value="1" required>
        </div>
        <div class="mb-3">
            <label for="num_articles" class="form-label">Number of Articles per Topic</label>
            <input type="number" class="form-control" id="num_articles" name="num_articles" min="1" max="25" value="1" required>
        </div>
        <div class="mb-3">
            <label for="image_percentage" class="form-label">Percentage of Articles with Images</label>
            <input type="number" class="form-control" id="image_percentage" name="image_percentage" min="0" max="100" value="0" required>
        </div>
        <div class="mb-3 form-check">
            <input type="checkbox" class="form-check-input" id="use_foreign_chars" name="use_foreign_chars">
            <label class="form-check-label" for="use_foreign_chars">Use foreign characters</label>
        </div>
        <button type="submit" class="btn btn-primary" id="generate-button">Generate Content</button>
    </form>

    <div id="loading-indicator" class="mt-3" style="display: none;">
        <div class="d-flex justify-content-center">
            <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
        </div>
        <p class="text-center mt-2">Generating content, please wait...</p>
    </div>

    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <div class="alert alert-{{ category }} mt-3" role="alert">
                    {{ message }}
                </div>
            {% endfor %}
        {% endif %}
    {% endwith %}
</div>
{% endblock %}

{% block scripts %}
<script>
$(document).ready(function() {
    $('#generate-form').on('submit', function() {
        $('#generate-button').prop('disabled', true);
        $('#loading-indicator').show();
    });
});
</script>
{% endblock %}